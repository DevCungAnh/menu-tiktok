<!--
  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘                    Báº¢N QUYá»€N THUá»˜C Vá»€                        â•‘
  â•‘                   NGUYá»„N TUáº¤N ANH                            â•‘
  â•‘                                                              â•‘
  â•‘  Â© 2024-2025 All Rights Reserved                             â•‘
  â•‘  Zalo: 0559629469                                            â•‘
  â•‘                                                              â•‘
  â•‘  NGHIÃŠM Cáº¤M SAO CHÃ‰P, PHÃ‚N PHá»I HOáº¶C Sá»¬ Dá»¤NG                 â•‘
  â•‘  MÃ€ KHÃ”NG CÃ“ Sá»° CHO PHÃ‰P Cá»¦A TÃC GIáº¢                         â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-->
<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Báº£ng GiÃ¡ Dá»‹ch Vá»¥ | LÃªn Äiá»ƒm CMT</title>
    <meta
      name="description"
      content="Báº£ng giÃ¡ dá»‹ch vá»¥ tÄƒng tÆ°Æ¡ng tÃ¡c - View, Like, Comment, Share, Follow"
    />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Star Particle Background (Canvas) -->
    <canvas id="starfield" aria-hidden="true"></canvas>

    <!-- Animated Gradient Overlay -->
    <div class="gradient-bg" aria-hidden="true"></div>

    <!-- Main Content -->
    <main class="main-container">
      <!-- Menu Card -->
      <article class="menu-card">
        <!-- Header -->
        <header class="card-header">
          <h1 class="card-title">LÃªn Äiá»ƒm CMT v1, v2</h1>
          <p class="card-subtitle">(tÃ­nh cáº£ v ghim) cÃ³ nháº­n Ä‘Äƒng láº¡i áº¡</p>
          <a href="combo.html" class="nav-button"
            >ğŸ“¦ Báº£ng giÃ¡ chuyá»ƒn khoáº£n ngoÃ i</a
          >
          <a href="history.html" class="nav-button history-btn"
            >ğŸ“‹ Lá»‹ch sá»­ giao dá»‹ch</a
          >
        </header>

        <!-- Menu List -->
        <nav aria-label="Danh sÃ¡ch dá»‹ch vá»¥">
          <ul class="menu-list" role="list">
            <!-- Item 1: 10000 view -->
            <li
              class="menu-item"
              data-qty="5"
              data-tooltip="10k view"
              data-info="CÃ³ tuá»™t"
              data-order="10.000 view - 5 Ä‘iá»ƒm"
              tabindex="0"
            >
              <span class="badge-hot">ğŸ”¥ HOT</span>
              <!-- <span class="badge-maintenance">ğŸ”§ Äang báº£o trÃ¬</span> -->
              <span class="item-qty">5</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/eba3a9bb85c33e017f3648eaf88d7189~tplv-obj.webp"
                  alt="Hoa há»“ng"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">10.000 view (Nhanh)</span>
            </li>

            <!-- Divider -->
            <li class="divider" aria-hidden="true"></li>

            <!-- Item: 5000 view -->
            <!-- <li
              class="menu-item"
              data-qty="1"
              data-tooltip="5k view"
              data-info="Báº£o hÃ nh 30 ngÃ y"
              data-order="5.000 view BH - 1 Ä‘iá»ƒm"
              tabindex="0"
            >
              <span class="item-qty">1</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/a4c4dc437fd3a6632aba149769491f49.png~tplv-obj.webp"
                  alt="Báº¯n tim"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">5.000 view (Báº£o hÃ nh)</span>
            </li> -->

            <!-- Divider -->
            <li class="divider" aria-hidden="true"></li>

            <!-- Item 2: 800 Tim Nhanh -->
            <li
              class="menu-item"
              data-qty="1"
              data-tooltip="1000 Tim"
              data-info="KhÃ´ng báº£o hÃ nh"
              tabindex="0"
            >
              <!-- <span class="badge-maintenance">ğŸ”§ Äang báº£o trÃ¬</span> -->
              <span class="badge-hot">ğŸ”¥ HOT</span>
              <span class="item-qty">1</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/resource/d53125bd5416e6f2f6ab61da02ddd302.png~tplv-obj.webp"
                  alt="ChÃº heo may máº¯n"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">600 Tim (Nhanh)</span>
              <span class="item-badges">
                <span class="badge-heart" aria-label="Tim">â¤ï¸</span>
                <!-- <span class="badge-flag" aria-label="Viá»‡t Nam">ğŸ‡»ğŸ‡³</span> -->
                <span class="badge-flag" aria-label="Má»¹">ğŸ‡ºğŸ‡¸</span>
              </span>
            </li>

            <!-- Divider -->
            <li class="divider" aria-hidden="true"></li>

            <!-- Item 2: 400 Tim SiÃªu Tá»‘c -->
            <li
              class="menu-item"
              data-qty="1"
              data-tooltip="400 Tim SiÃªu Tá»‘c"
              data-info="KhÃ´ng tá»¥t"
              tabindex="0"
            >
              <span class="badge-hot">ğŸ”¥ HOT</span>
              <span class="item-qty">1</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/e45927083072ffe0015253d11e11a3b3~tplv-obj.webp"
                  alt="Phá»Ÿ"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">150 Tim (KhÃ´ng tá»¥t)</span>
              <span class="item-badges">
                <span class="badge-heart" aria-label="Tim">â¤ï¸</span>
                <!-- <span class="badge-flag" aria-label="Má»¹">ğŸ‡ºğŸ‡¸</span> -->
              </span>
            </li>

            <li class="divider" aria-hidden="true"></li>

            <!-- Item: 300 Tim Ã­t tá»¥t -->
            <li
              class="menu-item"
              data-qty="1"
              data-tooltip="300 Tim Ã­t tá»¥t"
              data-info="Ãt tá»¥t"
              tabindex="0"
            >
              <span class="item-qty">1</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/resource/312f721603de550519983ca22f5cc445.png~tplv-obj.webp"
                  alt="Cá» bá»‘n lÃ¡"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">300 Tim Ã­t tá»¥t</span>
              <span class="item-badges">
                <span class="badge-heart" aria-label="Tim">â¤ï¸</span>
              </span>
            </li>

            <li class="divider" aria-hidden="true"></li>

            <!-- Item: 500 Tim Viá»‡t -->
            <li
              class="menu-item"
              data-qty="3"
              data-tooltip="500 Tim Viá»‡t"
              data-info="KhÃ´ng báº£o hÃ nh"
              tabindex="0"
            >
              <span class="item-qty">3</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/eb77ead5c3abb6da6034d3cf6cfeb438~tplv-obj.webp"
                  alt="Rosa"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">500 Tim Viá»‡t</span>
              <span class="item-badges">
                <span class="badge-heart" aria-label="Tim">â¤ï¸</span>
                <span class="badge-flag" aria-label="Viá»‡t Nam">ğŸ‡»ğŸ‡³</span>
              </span>
            </li>

            <li class="divider" aria-hidden="true"></li>

            <!-- Item 4: 100 FL -->
            <li
              class="menu-item"
              data-qty="4"
              data-tooltip="100 Follow"
              data-info="KhÃ´ng Tá»¥t"
              tabindex="0"
            >
              <span class="item-qty">4</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/resource/d53125bd5416e6f2f6ab61da02ddd302.png~tplv-obj.webp"
                  alt="ChÃº heo may máº¯n"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">100 FL NgÆ°á»i tháº­t (KhÃ´ng Tá»¥t)</span>
              <span class="item-badges">
                <span class="badge-flag" aria-label="Viá»‡t Nam">ğŸ‡»ğŸ‡³</span>
              </span>
            </li>

            <li class="divider" aria-hidden="true"></li>

            <!-- Item: 400 FL -->
            <li
              class="menu-item"
              data-qty="1"
              data-tooltip="400 Follow"
              data-info="KhÃ´ng Tá»¥t"
              tabindex="0"
            >
              <span class="item-qty">1</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/1bdf0b38142a94af0f71ea53da82a3b1~tplv-obj.webp"
                  alt="BÃ³ hoa"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">300 FL KhÃ´ng Tá»¥t</span>
              <span class="item-badges">
                <span class="badge-flag" aria-label="Viá»‡t Nam">ğŸ‡»ğŸ‡³</span>
              </span>
            </li>

            <li class="divider" aria-hidden="true"></li>

            <!-- Item 5: 200 yÃªu thÃ­ch / share -->
            <li
              class="menu-item"
              data-qty="1"
              data-tooltip="200 lÆ°á»£t yÃªu thÃ­ch hoáº·c chia sáº»"
              data-info="KhÃ´ng tuá»™t"
              tabindex="0"
            >
              <span class="item-qty">1</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/resource/312f721603de550519983ca22f5cc445.png~tplv-obj.webp"
                  alt="Cá» bá»‘n lÃ¡"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">200 yÃªu thÃ­ch / share</span>
            </li>

            <li class="divider" aria-hidden="true"></li>

            <!-- Item 6: 20 cmt -->
            <li
              class="menu-item"
              data-qty="1"
              data-tooltip="20 bÃ¬nh luáº­n"
              data-info="KhÃ¡ch tá»± viáº¿t hoáº·c sá»‘p tá»± viáº¿t"
              tabindex="0"
            >
              <span class="item-qty">1</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/4e7ad6bdf0a1d860c538f38026d4e812~tplv-obj.webp"
                  alt="BÃ¡nh vÃ²ng"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">20 cmt</span>
              <span class="item-badges">
                <span class="badge-flag" aria-label="Viá»‡t Nam">ğŸ‡»ğŸ‡³</span>
              </span>
            </li>

            <li class="divider" aria-hidden="true"></li>

            <!-- Item 8: 5000 Tim -->
            <!-- <li
              class="menu-item premium"
              data-qty="1"
              data-tooltip="5000 Tim Má»¹"
              data-info="Báº£o hÃ nh 365 ngÃ y"
              tabindex="0"
            >
              <span class="item-qty">1</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/0f158a08f7886189cdabf496e8a07c21~tplv-obj.webp"
                  alt="Háº¡c giáº¥y"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">5000 Tim (BH 365 ngÃ y)</span>
              <span class="item-badges">
                <span class="badge-heart" aria-label="Tim">â¤ï¸</span>
                <span class="badge-flag" aria-label="Viá»‡t Nam">ğŸ‡»ğŸ‡³</span>
                <span class="badge-flag" aria-label="Má»¹">ğŸ‡ºğŸ‡¸</span>
              </span>
            </li> -->

            <li class="divider" aria-hidden="true"></li>

            <!-- Item 9: 1000 FL -->
            <!-- <li class="menu-item premium" data-qty="1" data-tooltip="1000 Follow" data-info="Báº£o hÃ nh vÄ©nh viá»…n" tabindex="0">
                        <span class="item-qty">1</span>
                        <span class="item-icon" aria-hidden="true"><img src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/148eef0884fdb12058d1c6897d1e02b9~tplv-obj.webp" alt="ChÃ³ Corgi" style="width: 28px; height: 28px; object-fit: contain;"></span>
                        <span class="item-text">1000 FL KhÃ´ng Tá»¥t</span>
                        <span class="item-badges">
                            <span class="badge-flag" aria-label="Viá»‡t Nam">ğŸ‡»ğŸ‡³</span>
                        </span>
                    </li> -->
          </ul>
        </nav>

        <!-- Bank Info -->
        <div class="bank-info">
          <h3 class="bank-title">ğŸ’³ ThÃ´ng tin chuyá»ƒn khoáº£n</h3>
          <div class="bank-qr">
            <img src="img/qr.jpg" alt="QR Code" class="qr-image" id="qrImage" />
          </div>
          <div class="bank-details">
            <p class="bank-number" id="bankNumber" data-stk="0325687430">
              STK: <strong>0325687430</strong>
              <span class="copy-btn" id="copyStk">ğŸ“‹</span>
            </p>
            <p class="bank-name">Nguyá»…n Tuáº¥n Anh</p>
          </div>
          <p class="copy-toast" id="copyToast">âœ… ÄÃ£ sao chÃ©p!</p>
        </div>

        <!-- QR Lightbox -->
        <div class="qr-lightbox" id="qrLightbox">
          <img src="img/qr.jpg" alt="QR Code" class="qr-lightbox-image" />
        </div>

        <!-- Footer -->
        <footer class="card-footer">
          <div class="footer-content">
            <a
              href="https://zalo.me/0559629469"
              target="_blank"
              class="zalo-contact"
            >
              <img
                src="https://upload.wikimedia.org/wikipedia/commons/9/91/Icon_of_Zalo.svg"
                alt="Zalo"
                style="width: 24px; height: 24px"
              />
              <span>Zalo: 0559629469</span>
            </a>
            <p class="zalo-contact">
              <a
                href="https://www.facebook.com/tuananhh111/"
                target="_blank"
                style="
                  display: flex;
                  align-items: center;
                  gap: 8px;
                  text-decoration: none;
                  color: inherit;
                "
              >
                <img
                  src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg"
                  alt="Facebook"
                  style="width: 24px; height: 24px"
                />
                <span>Facebook: Tuáº¥n Anh</span>
              </a>
            </p>
            <p class="copyright-text">
              <span class="copyright-icon">Â©</span>
              <span class="copyright-label">Báº£n quyá»n thuá»™c vá»</span>
              <span class="copyright-name">TUáº¤N ANH</span>
            </p>
          </div>
          <button
            class="effects-toggle"
            id="effectsToggle"
            aria-label="Báº­t/táº¯t hiá»‡u á»©ng ná»n"
            aria-pressed="true"
            title="Báº­t/táº¯t hiá»‡u á»©ng"
          >
            âœ¨
          </button>
        </footer>
      </article>
    </main>

    <div class="popup-overlay" id="popupOverlay">
      <div class="popup-modal">
        <button class="popup-close" id="popupClose" aria-label="ÄÃ³ng">Ã—</button>
        <h3 class="popup-title" id="popupTitle">Chi tiáº¿t</h3>
        <p class="popup-info" id="popupInfo">ThÃ´ng tin chi tiáº¿t</p>
      </div>
    </div>

    <!-- YouTube Music Player -->
    <div
      id="ytPlayer"
      style="position: fixed; bottom: -1000px; left: 0; pointer-events: none"
    ></div>

    <!-- Music Control Panel -->
    <div class="music-panel" id="musicPanel">
      <div class="music-panel-header">
        <h4>ğŸµ Chá»n nháº¡c ná»n</h4>
        <button class="music-panel-close" id="musicPanelClose">Ã—</button>
      </div>
      <div class="music-panel-body">
        <div class="music-input-group">
          <input
            type="text"
            id="youtubeUrlInput"
            placeholder="Paste link YouTube..."
            class="music-input"
          />
          <button id="playYoutubeBtn" class="music-play-btn">â–¶</button>
        </div>
        <p class="music-hint">Hoáº·c chá»n bÃ i hÃ¡t:</p>
        <div class="music-playlist" id="musicPlaylist">
          <button class="playlist-item" data-videoid="jDthigR1e3U">
            ğŸµ Darling Ohayou x High Fashion
          </button>
          <button class="playlist-item" data-videoid="60ItHLz5WEA">
            ğŸµ Alan Walker - Faded
          </button>
          <button class="playlist-item" data-videoid="K4DyBUG242c">
            ğŸµ Cartoon - On & On
          </button>
          <button class="playlist-item" data-videoid="J2X5mJ3HDYE">
            ğŸµ DEAF KEV - Invincible
          </button>
        </div>
        <p class="music-now-playing" id="nowPlaying">ChÆ°a phÃ¡t nháº¡c</p>
      </div>
    </div>

    <button class="music-toggle" id="musicToggle" title="Báº­t/táº¯t nháº¡c">
      ğŸµ
    </button>

    <!-- Order Form Modal -->
    <div class="order-form-overlay" id="orderFormOverlay">
      <div class="order-form-modal">
        <button class="order-form-close" id="orderFormClose">Ã—</button>
        <h3 class="order-form-title">ğŸ“ Äáº·t Dá»‹ch Vá»¥</h3>
        <form id="orderForm">
          <div class="form-group">
            <label for="customerName">TÃªn cá»§a báº¡n *</label>
            <input
              type="text"
              id="customerName"
              name="customerName"
              placeholder="Nháº­p tÃªn..."
              required
            />
          </div>
          <div class="form-group">
            <label for="customerPhone"
              >Sá»‘ Ä‘iá»‡n thoáº¡i *
              <span class="form-hint">(dÃ¹ng Zalo sá»‘ nÃ y)</span></label
            >
            <input
              type="tel"
              id="customerPhone"
              name="customerPhone"
              placeholder="Nháº­p SÄT Zalo..."
              required
            />
          </div>
          <div class="form-group">
            <label>Loáº¡i dá»‹ch vá»¥ *</label>
            <div class="custom-dropdown" id="categoryDropdown">
              <div class="dropdown-selected" data-value="">-- Chá»n --</div>
              <div class="dropdown-options">
                <div class="dropdown-option" data-value="free">
                  ğŸ Free há»¯u duyÃªn
                </div>
                <div class="dropdown-option" data-value="combo">
                  ğŸ’ Combo chuyá»ƒn khoáº£n
                </div>
              </div>
            </div>
            <input
              type="hidden"
              id="serviceCategory"
              name="serviceCategory"
              required
            />
          </div>
          <div class="form-group" id="serviceTypeGroup" style="display: none">
            <label>Chá»n dá»‹ch vá»¥ *</label>
            <div class="custom-dropdown" id="serviceDropdown">
              <div class="dropdown-selected" data-value="">-- Chá»n --</div>
              <div class="dropdown-options" id="serviceOptions"></div>
            </div>
            <input type="hidden" id="serviceType" name="serviceType" />
          </div>
          <!-- Combo Details -->
          <div
            class="combo-details-section"
            id="comboDetailsSection"
            style="display: none"
          >
            <div class="combo-details-header">
              <span class="combo-details-title">ğŸ“¦ Chi tiáº¿t combo</span>
              <button
                type="button"
                class="combo-details-toggle"
                id="comboDetailsToggle"
              >
                Thu gá»n â–²
              </button>
            </div>
            <div class="combo-details-content" id="comboDetailsContent">
              <ul class="combo-details-list" id="comboDetailsList"></ul>
            </div>
          </div>
          <div class="form-group">
            <label for="orderNote">Ghi chÃº (link video, yÃªu cáº§u...)</label>
            <textarea
              id="orderNote"
              name="orderNote"
              placeholder="Nháº­p link video hoáº·c ghi chÃº..."
              rows="3"
            ></textarea>
          </div>
          <button type="submit" class="order-submit-btn">
            ğŸš€ Gá»­i ÄÆ¡n HÃ ng
          </button>
        </form>
        <p class="order-form-note">
          * Sau khi gá»­i, vui lÃ²ng chuyá»ƒn khoáº£n theo thÃ´ng tin bÃªn dÆ°á»›i
        </p>
      </div>
    </div>

    <!-- Order Button -->
    <button class="order-fab" id="orderFab" title="Äáº·t dá»‹ch vá»¥">ğŸ›’</button>

    <!-- Orders List Section -->
    <div class="orders-panel" id="ordersPanel">
      <div class="orders-panel-header">
        <h4>ğŸ“‹ ÄÆ¡n HÃ ng Gáº§n ÄÃ¢y</h4>
        <div style="display: flex; gap: 8px; align-items: center">
          <a
            href="history.html"
            style="
              font-size: 0.7rem;
              color: var(--neon-cyan);
              text-decoration: none;
            "
            >Xem táº¥t cáº£ â†’</a
          >
          <button class="orders-panel-close" id="ordersPanelClose">Ã—</button>
        </div>
      </div>
      <div class="orders-list" id="ordersList">
        <p class="no-orders">ChÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o</p>
      </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
      import {
        getDatabase,
        ref,
        push,
        onValue,
        serverTimestamp,
      } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-database.js";

      // Firebase config
      const firebaseConfig = {
        apiKey: "AIzaSyAnIU9HB0Aqw8mxWfxxVrcaus51Mx_8QTk",
        authDomain: "menu-tikkok.firebaseapp.com",
        databaseURL:
          "https://menu-tikkok-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "menu-tikkok",
        storageBucket: "menu-tikkok.firebasestorage.app",
        messagingSenderId: "889648179170",
        appId: "1:889648179170:web:28ac6df4d713ade38b3bbb",
        measurementId: "G-EBLVSBWCJD",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);

      // DOM Elements
      const orderForm = document.getElementById("orderForm");
      const orderFormOverlay = document.getElementById("orderFormOverlay");
      const orderFormClose = document.getElementById("orderFormClose");
      const orderFab = document.getElementById("orderFab");
      const ordersPanel = document.getElementById("ordersPanel");
      const ordersPanelClose = document.getElementById("ordersPanelClose");
      const ordersList = document.getElementById("ordersList");
      const serviceCategoryInput = document.getElementById("serviceCategory");
      const serviceTypeGroup = document.getElementById("serviceTypeGroup");
      const serviceTypeInput = document.getElementById("serviceType");
      const categoryDropdown = document.getElementById("categoryDropdown");
      const serviceDropdown = document.getElementById("serviceDropdown");
      const serviceOptionsContainer = document.getElementById("serviceOptions");
      const comboDetailsSection = document.getElementById(
        "comboDetailsSection"
      );
      const comboDetailsList = document.getElementById("comboDetailsList");
      const comboDetailsToggle = document.getElementById("comboDetailsToggle");
      const comboDetailsContent = document.getElementById(
        "comboDetailsContent"
      );

      // Service options data
      const serviceOptionsData = {
        free: [
          { value: "50 Tim FREE", label: "ğŸ 50 Tim" },
          { value: "5000 View FREE", label: "ğŸ 5000 View" },
        ],
        combo: [
          { value: "Combo 1 - 10K", label: "ğŸ’ Combo 1 - 10K" },
          { value: "Combo 2 - 20K", label: "ğŸ’ Combo 2 - 20K" },
          { value: "Combo 3 - 35K", label: "ğŸ’ Combo 3 - 35K" },
          { value: "Combo 4 - 50K", label: "ğŸ’ Combo 4 - 50K" },
          { value: "Combo 5 - 75K", label: "ğŸ’ Combo 5 - 75K" },
          { value: "Combo VIP - 100K", label: "ğŸ‘‘ Combo VIP - 100K" },
        ],
      };

      // Combo details data (giá»‘ng combo.html)
      const comboDetailsData = {
        "Combo 1 - 10K": [
          "200 Tim (KhÃ´ng tá»¥t)",
          "5.000 View xuhuong",
          "5 bÃ¬nh luáº­n (viáº¿t tay)",
          "100 YÃªu ThÃ­ch",
          "100 Share",
        ],
        "Combo 2 - 20K": [
          "100 FL Cháº¥t LÆ°á»£ng Cao",
          "500 Tim (KhÃ´ng tá»¥t)",
          "10.000 View xuhuong",
          "10 bÃ¬nh luáº­n (viáº¿t tay)",
          "200 YÃªu ThÃ­ch",
          "200 Share",
        ],
        "Combo 3 - 35K": [
          "250 FL Cháº¥t LÆ°á»£ng Cao",
          "1000 Tim (KhÃ´ng tá»¥t)",
          "25.000 View xuhuong",
          "20 bÃ¬nh luáº­n (viáº¿t tay)",
          "500 YÃªu ThÃ­ch",
          "500 Share",
        ],
        "Combo 4 - 50K": [
          "350 FL Cháº¥t LÆ°á»£ng Cao",
          "1500 Tim (KhÃ´ng tá»¥t)",
          "35.000 View xuhuong",
          "25 bÃ¬nh luáº­n (viáº¿t tay)",
          "400 YÃªu ThÃ­ch",
          "400 Share",
        ],
        "Combo 5 - 75K": [
          "500 FL Cháº¥t LÆ°á»£ng Cao",
          "2000 Tim (KhÃ´ng tá»¥t)",
          "50.000 View xuhuong",
          "30 bÃ¬nh luáº­n (viáº¿t tay)",
          "500 YÃªu ThÃ­ch",
          "500 Share",
        ],
        "Combo VIP - 100K": [
          "1000 FL Cháº¥t LÆ°á»£ng Cao",
          "3000 Tim (KhÃ´ng tá»¥t)",
          "70.000 View xuhuong",
          "50 bÃ¬nh luáº­n (viáº¿t tay)",
          "500 YÃªu ThÃ­ch",
          "500 Share",
        ],
      };

      // Toggle combo details
      comboDetailsToggle.addEventListener("click", () => {
        comboDetailsContent.classList.toggle("collapsed");
        comboDetailsToggle.textContent = comboDetailsContent.classList.contains(
          "collapsed"
        )
          ? "Má»Ÿ rá»™ng â–¼"
          : "Thu gá»n â–²";
      });

      // Custom dropdown functionality
      function initDropdown(dropdown, hiddenInput, onChange) {
        const selected = dropdown.querySelector(".dropdown-selected");
        const options = dropdown.querySelectorAll(".dropdown-option");

        selected.addEventListener("click", (e) => {
          e.stopPropagation();
          // Close other dropdowns
          document.querySelectorAll(".custom-dropdown.open").forEach((d) => {
            if (d !== dropdown) d.classList.remove("open");
          });
          dropdown.classList.toggle("open");
        });

        options.forEach((option) => {
          option.addEventListener("click", () => {
            const value = option.dataset.value;
            const text = option.textContent;
            selected.textContent = text;
            selected.dataset.value = value;
            hiddenInput.value = value;
            dropdown.classList.remove("open");
            options.forEach((o) => o.classList.remove("selected"));
            option.classList.add("selected");
            if (onChange) onChange(value);
          });
        });
      }

      // Close dropdowns when clicking outside
      document.addEventListener("click", () => {
        document.querySelectorAll(".custom-dropdown.open").forEach((d) => {
          d.classList.remove("open");
        });
      });

      // Init category dropdown
      initDropdown(categoryDropdown, serviceCategoryInput, (value) => {
        if (value && serviceOptionsData[value]) {
          serviceTypeGroup.style.display = "block";
          // Populate service options
          serviceOptionsContainer.innerHTML = serviceOptionsData[value]
            .map(
              (opt) =>
                `<div class="dropdown-option" data-value="${opt.value}">${opt.label}</div>`
            )
            .join("");
          // Reset service dropdown
          const serviceSelected =
            serviceDropdown.querySelector(".dropdown-selected");
          serviceSelected.textContent = "-- Chá»n --";
          serviceSelected.dataset.value = "";
          serviceTypeInput.value = "";
          // Hide combo details when changing category
          comboDetailsSection.style.display = "none";
          // Init service dropdown options
          serviceDropdown
            .querySelectorAll(".dropdown-option")
            .forEach((option) => {
              option.addEventListener("click", () => {
                const val = option.dataset.value;
                serviceSelected.textContent = option.textContent;
                serviceSelected.dataset.value = val;
                serviceTypeInput.value = val;
                serviceDropdown.classList.remove("open");
                serviceDropdown
                  .querySelectorAll(".dropdown-option")
                  .forEach((o) => o.classList.remove("selected"));
                option.classList.add("selected");

                // Show combo details if combo selected
                if (comboDetailsData[val]) {
                  comboDetailsList.innerHTML = comboDetailsData[val]
                    .map((item) => `<li>${item}</li>`)
                    .join("");
                  comboDetailsSection.style.display = "block";
                  comboDetailsContent.classList.remove("collapsed");
                  comboDetailsToggle.textContent = "Thu gá»n â–²";
                } else {
                  comboDetailsSection.style.display = "none";
                }
              });
            });
        } else {
          serviceTypeGroup.style.display = "none";
          serviceTypeInput.value = "";
          comboDetailsSection.style.display = "none";
        }
      });

      // Service dropdown click
      serviceDropdown
        .querySelector(".dropdown-selected")
        .addEventListener("click", (e) => {
          e.stopPropagation();
          document.querySelectorAll(".custom-dropdown.open").forEach((d) => {
            if (d !== serviceDropdown) d.classList.remove("open");
          });
          serviceDropdown.classList.toggle("open");
        });

      // Open/Close Order Form
      orderFab.addEventListener("click", () => {
        orderFormOverlay.classList.add("active");
      });

      orderFormClose.addEventListener("click", () => {
        orderFormOverlay.classList.remove("active");
      });

      orderFormOverlay.addEventListener("click", (e) => {
        if (e.target === orderFormOverlay) {
          orderFormOverlay.classList.remove("active");
        }
      });

      ordersPanelClose.addEventListener("click", () => {
        ordersPanel.classList.remove("active");
      });

      // Submit Order
      orderForm.addEventListener("submit", async (e) => {
        e.preventDefault();

        // Validate required fields
        const name = document.getElementById("customerName").value.trim();
        const phone = document.getElementById("customerPhone").value.trim();
        const category = document.getElementById("serviceCategory").value;
        const service = document.getElementById("serviceType").value;

        if (!name) {
          alert("âŒ Vui lÃ²ng nháº­p tÃªn cá»§a báº¡n!");
          return;
        }
        if (!phone) {
          alert("âŒ Vui lÃ²ng nháº­p sá»‘ Ä‘iá»‡n thoáº¡i!");
          return;
        }
        if (!category) {
          alert("âŒ Vui lÃ²ng chá»n loáº¡i dá»‹ch vá»¥!");
          return;
        }
        if (!service) {
          alert("âŒ Vui lÃ²ng chá»n dá»‹ch vá»¥ cá»¥ thá»ƒ!");
          return;
        }

        const note = document.getElementById("orderNote").value.trim();
        if (!note) {
          alert("âŒ Vui lÃ²ng nháº­p link video vÃ o ghi chÃº!");
          return;
        }
        if (!note.includes("tiktok.com")) {
          alert("âŒ Link pháº£i lÃ  link TikTok (https://www.tiktok.com/...)");
          return;
        }

        const orderData = {
          name: name,
          phone: phone,
          category: category,
          service: service,
          note: note,
          status: "pending",
          createdAt: Date.now(),
        };

        try {
          const ordersRef = ref(database, "orders");
          await push(ordersRef, orderData);

          // Reset form and hide service type
          orderForm.reset();
          serviceTypeGroup.style.display = "none";
          orderFormOverlay.classList.remove("active");

          // Show success message
          alert(
            "âœ… ÄÃ£ gá»­i Ä‘Æ¡n hÃ ng thÃ nh cÃ´ng! Vui lÃ²ng chuyá»ƒn khoáº£n theo thÃ´ng tin trÃªn trang."
          );
        } catch (error) {
          console.error("Error:", error);
          alert("âŒ CÃ³ lá»—i xáº£y ra. Vui lÃ²ng thá»­ láº¡i!");
        }
      });

      // Load Orders Realtime
      const ordersRef = ref(database, "orders");
      onValue(ordersRef, (snapshot) => {
        const orders = [];
        snapshot.forEach((child) => {
          orders.push({ id: child.key, ...child.val() });
        });

        // Sort by newest first
        orders.sort((a, b) => b.createdAt - a.createdAt);

        // Render orders
        if (orders.length === 0) {
          ordersList.innerHTML =
            '<p class="no-orders">ChÆ°a cÃ³ Ä‘Æ¡n hÃ ng nÃ o</p>';
        } else {
          ordersList.innerHTML = orders
            .slice(0, 10)
            .map(
              (order) => `
            <div class="order-item ${order.status}">
              <div class="order-item-header">
                <span class="order-name">${order.name}</span>
                <span class="order-status">${
                  order.status === "pending" ? "â³ Chá» xá»­ lÃ½" : "âœ… ÄÃ£ xong"
                }</span>
              </div>
              <div class="order-service">${order.service}</div>
              <div class="order-time">${new Date(
                order.createdAt
              ).toLocaleString("vi-VN")}</div>
            </div>
          `
            )
            .join("");
        }
      });
    </script>

    <script src="script.js"></script>
  </body>
</html>
