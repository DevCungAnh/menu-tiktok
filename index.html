<!--
  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
  ‚ïë                    B·∫¢N QUY·ªÄN THU·ªòC V·ªÄ                        ‚ïë
  ‚ïë                   NGUY·ªÑN TU·∫§N ANH                            ‚ïë
  ‚ïë                                                              ‚ïë
  ‚ïë  ¬© 2024-2025 All Rights Reserved                             ‚ïë
  ‚ïë  Zalo: 0559629469                                            ‚ïë
  ‚ïë                                                              ‚ïë
  ‚ïë  NGHI√äM C·∫§M SAO CH√âP, PH√ÇN PH·ªêI HO·∫∂C S·ª¨ D·ª§NG                 ‚ïë
  ‚ïë  M√Ä KH√îNG C√ì S·ª∞ CHO PH√âP C·ª¶A T√ÅC GI·∫¢                         ‚ïë
  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
-->
<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>B·∫£ng Gi√° D·ªãch V·ª• | L√™n ƒêi·ªÉm CMT</title>
    <meta
      name="description"
      content="B·∫£ng gi√° d·ªãch v·ª• tƒÉng t∆∞∆°ng t√°c - View, Like, Comment, Share, Follow"
    />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Star Particle Background (Canvas) -->
    <canvas id="starfield" aria-hidden="true"></canvas>

    <!-- Animated Gradient Overlay -->
    <div class="gradient-bg" aria-hidden="true"></div>

    <!-- Main Content -->
    <main class="main-container">
      <!-- Menu Card -->
      <article class="menu-card">
        <!-- Header -->
        <header class="card-header">
          <h1 class="card-title">L√™n ƒêi·ªÉm CMT v1, v2</h1>
          <p class="card-subtitle">(t√≠nh c·∫£ v ghim) c√≥ nh·∫≠n ƒëƒÉng l·∫°i ·∫°</p>
          <a href="combo.html" class="nav-button"
            >üì¶ B·∫£ng gi√° chuy·ªÉn kho·∫£n ngo√†i</a
          >
          <a href="history.html" class="nav-button history-btn"
            >üìã L·ªãch s·ª≠ giao d·ªãch</a
          >
        </header>

        <!-- Menu List -->
        <nav aria-label="Danh s√°ch d·ªãch v·ª•">
          <ul class="menu-list" role="list">
            <!-- Item 1: 10000 view -->
            <li
              class="menu-item"
              data-qty="5"
              data-tooltip="10k view"
              data-info="C√≥ tu·ªôt"
              data-order="10.000 view - 5 ƒëi·ªÉm"
              tabindex="0"
            >
              <span class="badge-hot">üî• HOT</span>
              <!-- <span class="badge-maintenance">üîß ƒêang b·∫£o tr√¨</span> -->
              <span class="item-qty">5</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/eba3a9bb85c33e017f3648eaf88d7189~tplv-obj.webp"
                  alt="Hoa h·ªìng"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">10.000 view (Nhanh)</span>
            </li>

            <!-- Divider -->
            <li class="divider" aria-hidden="true"></li>

            <!-- Item: 5000 view -->
            <!-- <li
              class="menu-item"
              data-qty="1"
              data-tooltip="5k view"
              data-info="B·∫£o h√†nh 30 ng√†y"
              data-order="5.000 view BH - 1 ƒëi·ªÉm"
              tabindex="0"
            >
              <span class="item-qty">1</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/a4c4dc437fd3a6632aba149769491f49.png~tplv-obj.webp"
                  alt="B·∫Øn tim"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">5.000 view (B·∫£o h√†nh)</span>
            </li> -->

            <!-- Divider -->
            <li class="divider" aria-hidden="true"></li>

            <!-- Item 2: 800 Tim Nhanh -->
            <li
              class="menu-item"
              data-qty="1"
              data-tooltip="1000 Tim"
              data-info="C√≥ t·ª•t"
              tabindex="0"
            >
              <!-- <span class="badge-maintenance">üîß ƒêang b·∫£o tr√¨</span> -->
              <span class="badge-hot">üî• HOT</span>
              <span class="item-qty">1</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/resource/d53125bd5416e6f2f6ab61da02ddd302.png~tplv-obj.webp"
                  alt="Ch√∫ heo may m·∫Øn"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">1000 Tim</span>
              <span class="item-badges">
                <span class="badge-heart" aria-label="Tim">‚ù§Ô∏è</span>
                <!-- <span class="badge-flag" aria-label="Vi·ªát Nam">üáªüá≥</span> -->
                <span class="badge-flag" aria-label="M·ªπ">üá∫üá∏</span>
              </span>
            </li>

            <!-- Divider -->
            <li class="divider" aria-hidden="true"></li>

            <!-- Item 2: 400 Tim Si√™u T·ªëc -->
            <li
              class="menu-item"
              data-qty="1"
              data-tooltip="400 Tim Si√™u T·ªëc"
              data-info="Kh√¥ng t·ª•t"
              tabindex="0"
            >
              <span class="badge-hot">üî• HOT</span>
              <span class="item-qty">1</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/e45927083072ffe0015253d11e11a3b3~tplv-obj.webp"
                  alt="Ph·ªü"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">150 Tim (Kh√¥ng t·ª•t)</span>
              <span class="item-badges">
                <span class="badge-heart" aria-label="Tim">‚ù§Ô∏è</span>
                <!-- <span class="badge-flag" aria-label="M·ªπ">üá∫üá∏</span> -->
              </span>
            </li>

            <li class="divider" aria-hidden="true"></li>

            <!-- Item: 300 Tim √≠t t·ª•t -->
            <li
              class="menu-item"
              data-qty="1"
              data-tooltip="300 Tim √≠t t·ª•t"
              data-info="√çt t·ª•t"
              tabindex="0"
            >
              <span class="item-qty">1</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/resource/312f721603de550519983ca22f5cc445.png~tplv-obj.webp"
                  alt="C·ªè b·ªën l√°"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">300 Tim √≠t t·ª•t</span>
              <span class="item-badges">
                <span class="badge-heart" aria-label="Tim">‚ù§Ô∏è</span>
              </span>
            </li>

            <li class="divider" aria-hidden="true"></li>

            <!-- Item: 500 Tim Vi·ªát -->
            <li
              class="menu-item"
              data-qty="3"
              data-tooltip="500 Tim Vi·ªát"
              data-info="Kh√¥ng b·∫£o h√†nh"
              tabindex="0"
            >
              <span class="item-qty">3</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/eb77ead5c3abb6da6034d3cf6cfeb438~tplv-obj.webp"
                  alt="Rosa"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">500 Tim Vi·ªát</span>
              <span class="item-badges">
                <span class="badge-heart" aria-label="Tim">‚ù§Ô∏è</span>
                <span class="badge-flag" aria-label="Vi·ªát Nam">üáªüá≥</span>
              </span>
            </li>

            <li class="divider" aria-hidden="true"></li>

            <!-- Item 4: 100 FL -->
            <li
              class="menu-item"
              data-qty="4"
              data-tooltip="100 Follow"
              data-info="Kh√¥ng T·ª•t"
              tabindex="0"
            >
              <span class="item-qty">4</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/resource/d53125bd5416e6f2f6ab61da02ddd302.png~tplv-obj.webp"
                  alt="Ch√∫ heo may m·∫Øn"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">100 FL Ng∆∞·ªùi th·∫≠t (Kh√¥ng T·ª•t)</span>
              <span class="item-badges">
                <span class="badge-flag" aria-label="Vi·ªát Nam">üáªüá≥</span>
              </span>
            </li>

            <li class="divider" aria-hidden="true"></li>

            <!-- Item: 400 FL -->
            <li
              class="menu-item"
              data-qty="1"
              data-tooltip="400 Follow"
              data-info="Kh√¥ng T·ª•t"
              tabindex="0"
            >
              <span class="item-qty">1</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/1bdf0b38142a94af0f71ea53da82a3b1~tplv-obj.webp"
                  alt="B√≥ hoa"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">300 FL Kh√¥ng T·ª•t</span>
              <span class="item-badges">
                <span class="badge-flag" aria-label="Vi·ªát Nam">üáªüá≥</span>
              </span>
            </li>

            <li class="divider" aria-hidden="true"></li>

            <!-- Item 5: 200 y√™u th√≠ch / share -->
            <li
              class="menu-item"
              data-qty="1"
              data-tooltip="200 l∆∞·ª£t y√™u th√≠ch ho·∫∑c chia s·∫ª"
              data-info="Kh√¥ng tu·ªôt"
              tabindex="0"
            >
              <span class="item-qty">1</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/resource/312f721603de550519983ca22f5cc445.png~tplv-obj.webp"
                  alt="C·ªè b·ªën l√°"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">200 y√™u th√≠ch / share</span>
            </li>

            <li class="divider" aria-hidden="true"></li>

            <!-- Item 6: 20 cmt -->
            <li
              class="menu-item"
              data-qty="1"
              data-tooltip="20 b√¨nh lu·∫≠n"
              data-info="Kh√°ch t·ª± vi·∫øt ho·∫∑c s·ªëp t·ª± vi·∫øt"
              tabindex="0"
            >
              <span class="item-qty">1</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/4e7ad6bdf0a1d860c538f38026d4e812~tplv-obj.webp"
                  alt="B√°nh v√≤ng"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">20 cmt</span>
              <span class="item-badges">
                <span class="badge-flag" aria-label="Vi·ªát Nam">üáªüá≥</span>
              </span>
            </li>

            <li class="divider" aria-hidden="true"></li>

            <!-- Item 8: 5000 Tim -->
            <!-- <li
              class="menu-item premium"
              data-qty="1"
              data-tooltip="5000 Tim M·ªπ"
              data-info="B·∫£o h√†nh 365 ng√†y"
              tabindex="0"
            >
              <span class="item-qty">1</span>
              <span class="item-icon" aria-hidden="true"
                ><img
                  src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/0f158a08f7886189cdabf496e8a07c21~tplv-obj.webp"
                  alt="H·∫°c gi·∫•y"
                  style="width: 28px; height: 28px; object-fit: contain"
              /></span>
              <span class="item-text">5000 Tim (BH 365 ng√†y)</span>
              <span class="item-badges">
                <span class="badge-heart" aria-label="Tim">‚ù§Ô∏è</span>
                <span class="badge-flag" aria-label="Vi·ªát Nam">üáªüá≥</span>
                <span class="badge-flag" aria-label="M·ªπ">üá∫üá∏</span>
              </span>
            </li> -->

            <li class="divider" aria-hidden="true"></li>

            <!-- Item 9: 1000 FL -->
            <!-- <li class="menu-item premium" data-qty="1" data-tooltip="1000 Follow" data-info="B·∫£o h√†nh vƒ©nh vi·ªÖn" tabindex="0">
                        <span class="item-qty">1</span>
                        <span class="item-icon" aria-hidden="true"><img src="https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/148eef0884fdb12058d1c6897d1e02b9~tplv-obj.webp" alt="Ch√≥ Corgi" style="width: 28px; height: 28px; object-fit: contain;"></span>
                        <span class="item-text">1000 FL Kh√¥ng T·ª•t</span>
                        <span class="item-badges">
                            <span class="badge-flag" aria-label="Vi·ªát Nam">üáªüá≥</span>
                        </span>
                    </li> -->
          </ul>
        </nav>

        <!-- Bank Info -->
        <div class="bank-info">
          <h3 class="bank-title">üí≥ Th√¥ng tin chuy·ªÉn kho·∫£n</h3>
          <div class="bank-qr">
            <img src="img/qr.jpg" alt="QR Code" class="qr-image" id="qrImage" />
          </div>
          <div class="bank-details">
            <p class="bank-number" id="bankNumber" data-stk="0325687430">
              STK: <strong>0325687430</strong>
              <span class="copy-btn" id="copyStk">üìã</span>
            </p>
            <p class="bank-name">Nguy·ªÖn Tu·∫•n Anh</p>
          </div>
          <p class="copy-toast" id="copyToast">‚úÖ ƒê√£ sao ch√©p!</p>
        </div>

        <!-- QR Lightbox -->
        <div class="qr-lightbox" id="qrLightbox">
          <img src="img/qr.jpg" alt="QR Code" class="qr-lightbox-image" />
        </div>

        <!-- Footer -->
        <footer class="card-footer">
          <div class="footer-content">
            <a
              href="https://zalo.me/0559629469"
              target="_blank"
              class="zalo-contact"
            >
              <img
                src="https://upload.wikimedia.org/wikipedia/commons/9/91/Icon_of_Zalo.svg"
                alt="Zalo"
                style="width: 24px; height: 24px"
              />
              <span>Zalo: 0559629469</span>
            </a>
            <p class="zalo-contact">
              <a
                href="https://www.facebook.com/tuananhh111/"
                target="_blank"
                style="
                  display: flex;
                  align-items: center;
                  gap: 8px;
                  text-decoration: none;
                  color: inherit;
                "
              >
                <img
                  src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg"
                  alt="Facebook"
                  style="width: 24px; height: 24px"
                />
                <span>Facebook: Tu·∫•n Anh</span>
              </a>
            </p>
            <p class="copyright-text">
              <span class="copyright-icon">¬©</span>
              <span class="copyright-label">B·∫£n quy·ªÅn thu·ªôc v·ªÅ</span>
              <span class="copyright-name">TU·∫§N ANH</span>
            </p>
          </div>
          <button
            class="effects-toggle"
            id="effectsToggle"
            aria-label="B·∫≠t/t·∫Øt hi·ªáu ·ª©ng n·ªÅn"
            aria-pressed="true"
            title="B·∫≠t/t·∫Øt hi·ªáu ·ª©ng"
          >
            ‚ú®
          </button>
        </footer>
      </article>
    </main>

    <div class="popup-overlay" id="popupOverlay">
      <div class="popup-modal">
        <button class="popup-close" id="popupClose" aria-label="ƒê√≥ng">√ó</button>
        <h3 class="popup-title" id="popupTitle">Chi ti·∫øt</h3>
        <p class="popup-info" id="popupInfo">Th√¥ng tin chi ti·∫øt</p>
      </div>
    </div>

    <!-- YouTube Music Player -->
    <div
      id="ytPlayer"
      style="position: fixed; bottom: -1000px; left: 0; pointer-events: none"
    ></div>

    <!-- Music Control Panel -->
    <div class="music-panel" id="musicPanel">
      <div class="music-panel-header">
        <h4>üéµ Ch·ªçn nh·∫°c n·ªÅn</h4>
        <button class="music-panel-close" id="musicPanelClose">√ó</button>
      </div>
      <div class="music-panel-body">
        <div class="music-input-group">
          <input
            type="text"
            id="youtubeUrlInput"
            placeholder="Paste link YouTube..."
            class="music-input"
          />
          <button id="playYoutubeBtn" class="music-play-btn">‚ñ∂</button>
        </div>
        <p class="music-hint">Ho·∫∑c ch·ªçn b√†i h√°t:</p>
        <div class="music-playlist" id="musicPlaylist">
          <button class="playlist-item" data-videoid="jDthigR1e3U">
            üéµ Darling Ohayou x High Fashion
          </button>
          <button class="playlist-item" data-videoid="60ItHLz5WEA">
            üéµ Alan Walker - Faded
          </button>
          <button class="playlist-item" data-videoid="K4DyBUG242c">
            üéµ Cartoon - On & On
          </button>
          <button class="playlist-item" data-videoid="J2X5mJ3HDYE">
            üéµ DEAF KEV - Invincible
          </button>
        </div>
        <p class="music-now-playing" id="nowPlaying">Ch∆∞a ph√°t nh·∫°c</p>
      </div>
    </div>

    <button class="music-toggle" id="musicToggle" title="B·∫≠t/t·∫Øt nh·∫°c">
      üéµ
    </button>

    <!-- Order Form Modal -->
    <div class="order-form-overlay" id="orderFormOverlay">
      <div class="order-form-modal">
        <button class="order-form-close" id="orderFormClose">√ó</button>
        <h3 class="order-form-title">üìù ƒê·∫∑t D·ªãch V·ª•</h3>
        <form id="orderForm">
          <div class="form-group">
            <label for="customerName">T√™n c·ªßa b·∫°n *</label>
            <input
              type="text"
              id="customerName"
              name="customerName"
              placeholder="Nh·∫≠p t√™n..."
              required
            />
          </div>
          <div class="form-group">
            <label for="customerPhone"
              >S·ªë ƒëi·ªán tho·∫°i *
              <span class="form-hint">(d√πng Zalo s·ªë n√†y)</span></label
            >
            <input
              type="tel"
              id="customerPhone"
              name="customerPhone"
              placeholder="Nh·∫≠p SƒêT Zalo..."
              required
            />
          </div>
          <div class="form-group">
            <label>Lo·∫°i d·ªãch v·ª• *</label>
            <div class="custom-dropdown" id="categoryDropdown">
              <div class="dropdown-selected" data-value="">-- Ch·ªçn --</div>
              <div class="dropdown-options">
                <div class="dropdown-option" data-value="free">
                  üéÅ Free h·ªØu duy√™n
                </div>
                <div class="dropdown-option" data-value="combo">
                  üíé Combo chuy·ªÉn kho·∫£n
                </div>
              </div>
            </div>
            <input
              type="hidden"
              id="serviceCategory"
              name="serviceCategory"
              required
            />
          </div>
          <div class="form-group" id="serviceTypeGroup" style="display: none">
            <label>Ch·ªçn d·ªãch v·ª• *</label>
            <div class="custom-dropdown" id="serviceDropdown">
              <div class="dropdown-selected" data-value="">-- Ch·ªçn --</div>
              <div class="dropdown-options" id="serviceOptions"></div>
            </div>
            <input type="hidden" id="serviceType" name="serviceType" />
          </div>
          <!-- Combo Details -->
          <div
            class="combo-details-section"
            id="comboDetailsSection"
            style="display: none"
          >
            <div class="combo-details-header">
              <span class="combo-details-title">üì¶ Chi ti·∫øt combo</span>
              <button
                type="button"
                class="combo-details-toggle"
                id="comboDetailsToggle"
              >
                Thu g·ªçn ‚ñ≤
              </button>
            </div>
            <div class="combo-details-content" id="comboDetailsContent">
              <ul class="combo-details-list" id="comboDetailsList"></ul>
            </div>
          </div>
          <div class="form-group">
            <label for="orderNote">Ghi ch√∫ (link video, y√™u c·∫ßu...)</label>
            <textarea
              id="orderNote"
              name="orderNote"
              placeholder="Nh·∫≠p link video ho·∫∑c ghi ch√∫..."
              rows="3"
            ></textarea>
          </div>
          <button type="submit" class="order-submit-btn">
            üöÄ G·ª≠i ƒê∆°n H√†ng
          </button>
        </form>
        <p class="order-form-note">
          * Sau khi g·ª≠i, vui l√≤ng chuy·ªÉn kho·∫£n theo th√¥ng tin b√™n d∆∞·ªõi
        </p>
      </div>
    </div>

    <!-- Order Button -->
    <button class="order-fab" id="orderFab" title="ƒê·∫∑t d·ªãch v·ª•">üõí</button>

    <!-- Orders List Section -->
    <div class="orders-panel" id="ordersPanel">
      <div class="orders-panel-header">
        <h4>üìã ƒê∆°n H√†ng G·∫ßn ƒê√¢y</h4>
        <div style="display: flex; gap: 8px; align-items: center">
          <a
            href="history.html"
            style="
              font-size: 0.7rem;
              color: var(--neon-cyan);
              text-decoration: none;
            "
            >Xem t·∫•t c·∫£ ‚Üí</a
          >
          <button class="orders-panel-close" id="ordersPanelClose">√ó</button>
        </div>
      </div>
      <div class="orders-list" id="ordersList">
        <p class="no-orders">Ch∆∞a c√≥ ƒë∆°n h√†ng n√†o</p>
      </div>
    </div>

    <!-- Firebase Config (injected by Netlify) -->
    <script src="firebase-config.js"></script>

    <!-- Firebase SDK -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
      import {
        getDatabase,
        ref,
        push,
        onValue,
        serverTimestamp,
      } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-database.js";

      // Firebase config - loaded from firebase-config.js
      const firebaseConfig = window.FIREBASE_CONFIG || {
        apiKey: "__GOOGLE_API_KEY__",
        authDomain: "menu-tikkok.firebaseapp.com",
        databaseURL:
          "https://menu-tikkok-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "menu-tikkok",
        storageBucket: "menu-tikkok.firebasestorage.app",
        messagingSenderId: "889648179170",
        appId: "1:889648179170:web:28ac6df4d713ade38b3bbb",
        measurementId: "G-EBLVSBWCJD",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);

      // DOM Elements
      const orderForm = document.getElementById("orderForm");
      const orderFormOverlay = document.getElementById("orderFormOverlay");
      const orderFormClose = document.getElementById("orderFormClose");
      const orderFab = document.getElementById("orderFab");
      const ordersPanel = document.getElementById("ordersPanel");
      const ordersPanelClose = document.getElementById("ordersPanelClose");
      const ordersList = document.getElementById("ordersList");
      const serviceCategoryInput = document.getElementById("serviceCategory");
      const serviceTypeGroup = document.getElementById("serviceTypeGroup");
      const serviceTypeInput = document.getElementById("serviceType");
      const categoryDropdown = document.getElementById("categoryDropdown");
      const serviceDropdown = document.getElementById("serviceDropdown");
      const serviceOptionsContainer = document.getElementById("serviceOptions");
      const comboDetailsSection = document.getElementById(
        "comboDetailsSection"
      );
      const comboDetailsList = document.getElementById("comboDetailsList");
      const comboDetailsToggle = document.getElementById("comboDetailsToggle");
      const comboDetailsContent = document.getElementById(
        "comboDetailsContent"
      );

      // Service options data
      const serviceOptionsData = {
        free: [
          { value: "50 Tim FREE", label: "üéÅ 50 Tim" },
          { value: "5000 View FREE", label: "üéÅ 5000 View" },
        ],
        combo: [
          { value: "Combo 1 - 10K", label: "üíé Combo 1 - 10K" },
          { value: "Combo 2 - 20K", label: "üíé Combo 2 - 20K" },
          { value: "Combo 3 - 35K", label: "üíé Combo 3 - 35K" },
          { value: "Combo 4 - 50K", label: "üíé Combo 4 - 50K" },
          { value: "Combo 5 - 75K", label: "üíé Combo 5 - 75K" },
          { value: "Combo VIP - 100K", label: "üëë Combo VIP - 100K" },
        ],
      };

      // Combo details data (gi·ªëng combo.html)
      const comboDetailsData = {
        "Combo 1 - 10K": [
          "200 Tim (Kh√¥ng t·ª•t)",
          "5.000 View xuhuong",
          "5 b√¨nh lu·∫≠n (vi·∫øt tay)",
          "100 Y√™u Th√≠ch",
          "100 Share",
        ],
        "Combo 2 - 20K": [
          "100 FL Ch·∫•t L∆∞·ª£ng Cao",
          "500 Tim (Kh√¥ng t·ª•t)",
          "10.000 View xuhuong",
          "10 b√¨nh lu·∫≠n (vi·∫øt tay)",
          "200 Y√™u Th√≠ch",
          "200 Share",
        ],
        "Combo 3 - 35K": [
          "250 FL Ch·∫•t L∆∞·ª£ng Cao",
          "1000 Tim (Kh√¥ng t·ª•t)",
          "25.000 View xuhuong",
          "20 b√¨nh lu·∫≠n (vi·∫øt tay)",
          "500 Y√™u Th√≠ch",
          "500 Share",
        ],
        "Combo 4 - 50K": [
          "350 FL Ch·∫•t L∆∞·ª£ng Cao",
          "1500 Tim (Kh√¥ng t·ª•t)",
          "35.000 View xuhuong",
          "25 b√¨nh lu·∫≠n (vi·∫øt tay)",
          "400 Y√™u Th√≠ch",
          "400 Share",
        ],
        "Combo 5 - 75K": [
          "500 FL Ch·∫•t L∆∞·ª£ng Cao",
          "2000 Tim (Kh√¥ng t·ª•t)",
          "50.000 View xuhuong",
          "30 b√¨nh lu·∫≠n (vi·∫øt tay)",
          "500 Y√™u Th√≠ch",
          "500 Share",
        ],
        "Combo VIP - 100K": [
          "1000 FL Ch·∫•t L∆∞·ª£ng Cao",
          "3000 Tim (Kh√¥ng t·ª•t)",
          "70.000 View xuhuong",
          "50 b√¨nh lu·∫≠n (vi·∫øt tay)",
          "500 Y√™u Th√≠ch",
          "500 Share",
        ],
      };

      // Toggle combo details
      comboDetailsToggle.addEventListener("click", () => {
        comboDetailsContent.classList.toggle("collapsed");
        comboDetailsToggle.textContent = comboDetailsContent.classList.contains(
          "collapsed"
        )
          ? "M·ªü r·ªông ‚ñº"
          : "Thu g·ªçn ‚ñ≤";
      });

      // Custom dropdown functionality
      function initDropdown(dropdown, hiddenInput, onChange) {
        const selected = dropdown.querySelector(".dropdown-selected");
        const options = dropdown.querySelectorAll(".dropdown-option");

        selected.addEventListener("click", (e) => {
          e.stopPropagation();
          // Close other dropdowns
          document.querySelectorAll(".custom-dropdown.open").forEach((d) => {
            if (d !== dropdown) d.classList.remove("open");
          });
          dropdown.classList.toggle("open");
        });

        options.forEach((option) => {
          option.addEventListener("click", () => {
            const value = option.dataset.value;
            const text = option.textContent;
            selected.textContent = text;
            selected.dataset.value = value;
            hiddenInput.value = value;
            dropdown.classList.remove("open");
            options.forEach((o) => o.classList.remove("selected"));
            option.classList.add("selected");
            if (onChange) onChange(value);
          });
        });
      }

      // Close dropdowns when clicking outside
      document.addEventListener("click", () => {
        document.querySelectorAll(".custom-dropdown.open").forEach((d) => {
          d.classList.remove("open");
        });
      });

      // Init category dropdown
      initDropdown(categoryDropdown, serviceCategoryInput, (value) => {
        if (value && serviceOptionsData[value]) {
          serviceTypeGroup.style.display = "block";
          // Populate service options
          serviceOptionsContainer.innerHTML = serviceOptionsData[value]
            .map(
              (opt) =>
                `<div class="dropdown-option" data-value="${opt.value}">${opt.label}</div>`
            )
            .join("");
          // Reset service dropdown
          const serviceSelected =
            serviceDropdown.querySelector(".dropdown-selected");
          serviceSelected.textContent = "-- Ch·ªçn --";
          serviceSelected.dataset.value = "";
          serviceTypeInput.value = "";
          // Hide combo details when changing category
          comboDetailsSection.style.display = "none";
          // Init service dropdown options
          serviceDropdown
            .querySelectorAll(".dropdown-option")
            .forEach((option) => {
              option.addEventListener("click", () => {
                const val = option.dataset.value;
                serviceSelected.textContent = option.textContent;
                serviceSelected.dataset.value = val;
                serviceTypeInput.value = val;
                serviceDropdown.classList.remove("open");
                serviceDropdown
                  .querySelectorAll(".dropdown-option")
                  .forEach((o) => o.classList.remove("selected"));
                option.classList.add("selected");

                // Show combo details if combo selected
                if (comboDetailsData[val]) {
                  comboDetailsList.innerHTML = comboDetailsData[val]
                    .map((item) => `<li>${item}</li>`)
                    .join("");
                  comboDetailsSection.style.display = "block";
                  comboDetailsContent.classList.remove("collapsed");
                  comboDetailsToggle.textContent = "Thu g·ªçn ‚ñ≤";
                } else {
                  comboDetailsSection.style.display = "none";
                }
              });
            });
        } else {
          serviceTypeGroup.style.display = "none";
          serviceTypeInput.value = "";
          comboDetailsSection.style.display = "none";
        }
      });

      // Service dropdown click
      serviceDropdown
        .querySelector(".dropdown-selected")
        .addEventListener("click", (e) => {
          e.stopPropagation();
          document.querySelectorAll(".custom-dropdown.open").forEach((d) => {
            if (d !== serviceDropdown) d.classList.remove("open");
          });
          serviceDropdown.classList.toggle("open");
        });

      // Open/Close Order Form
      orderFab.addEventListener("click", () => {
        orderFormOverlay.classList.add("active");
      });

      orderFormClose.addEventListener("click", () => {
        orderFormOverlay.classList.remove("active");
      });

      orderFormOverlay.addEventListener("click", (e) => {
        if (e.target === orderFormOverlay) {
          orderFormOverlay.classList.remove("active");
        }
      });

      ordersPanelClose.addEventListener("click", () => {
        ordersPanel.classList.remove("active");
      });

      // Submit Order
      orderForm.addEventListener("submit", async (e) => {
        e.preventDefault();

        // Validate required fields
        const name = document.getElementById("customerName").value.trim();
        const phone = document.getElementById("customerPhone").value.trim();
        const category = document.getElementById("serviceCategory").value;
        const service = document.getElementById("serviceType").value;

        if (!name) {
          alert("‚ùå Vui l√≤ng nh·∫≠p t√™n c·ªßa b·∫°n!");
          return;
        }
        if (!phone) {
          alert("‚ùå Vui l√≤ng nh·∫≠p s·ªë ƒëi·ªán tho·∫°i!");
          return;
        }
        if (!category) {
          alert("‚ùå Vui l√≤ng ch·ªçn lo·∫°i d·ªãch v·ª•!");
          return;
        }
        if (!service) {
          alert("‚ùå Vui l√≤ng ch·ªçn d·ªãch v·ª• c·ª• th·ªÉ!");
          return;
        }

        const note = document.getElementById("orderNote").value.trim();
        if (!note) {
          alert("‚ùå Vui l√≤ng nh·∫≠p link video v√†o ghi ch√∫!");
          return;
        }
        if (!note.includes("tiktok.com")) {
          alert("‚ùå Link ph·∫£i l√† link TikTok (https://www.tiktok.com/...)");
          return;
        }

        const orderData = {
          name: name,
          phone: phone,
          category: category,
          service: service,
          note: note,
          status: "pending",
          createdAt: Date.now(),
        };

        try {
          const ordersRef = ref(database, "orders");
          await push(ordersRef, orderData);

          // Reset form and hide service type
          orderForm.reset();
          serviceTypeGroup.style.display = "none";
          orderFormOverlay.classList.remove("active");

          // Show success message
          alert(
            "‚úÖ ƒê√£ g·ª≠i ƒë∆°n h√†ng th√†nh c√¥ng! Vui l√≤ng chuy·ªÉn kho·∫£n theo th√¥ng tin tr√™n trang."
          );
        } catch (error) {
          console.error("Error:", error);
          alert("‚ùå C√≥ l·ªói x·∫£y ra. Vui l√≤ng th·ª≠ l·∫°i!");
        }
      });

      // Load Orders Realtime
      const ordersRef = ref(database, "orders");
      onValue(ordersRef, (snapshot) => {
        const orders = [];
        snapshot.forEach((child) => {
          orders.push({ id: child.key, ...child.val() });
        });

        // Sort by newest first
        orders.sort((a, b) => b.createdAt - a.createdAt);

        // Render orders
        if (orders.length === 0) {
          ordersList.innerHTML =
            '<p class="no-orders">Ch∆∞a c√≥ ƒë∆°n h√†ng n√†o</p>';
        } else {
          ordersList.innerHTML = orders
            .slice(0, 10)
            .map(
              (order) => `
            <div class="order-item ${order.status}">
              <div class="order-item-header">
                <span class="order-name">${order.name}</span>
                <span class="order-status">${
                  order.status === "pending" ? "‚è≥ Ch·ªù x·ª≠ l√Ω" : "‚úÖ ƒê√£ xong"
                }</span>
              </div>
              <div class="order-service">${order.service}</div>
              <div class="order-time">${new Date(
                order.createdAt
              ).toLocaleString("vi-VN")}</div>
            </div>
          `
            )
            .join("");
        }
      });
    </script>

    <script src="script.js"></script>
  </body>
</html>
